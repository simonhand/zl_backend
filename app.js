(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=5)})([function(a){a.exports=require('mongoose')},function(a){a.exports=require('babel-runtime/regenerator')},function(a){a.exports=require('babel-runtime/helpers/asyncToGenerator')},function(a){a.exports=require('koa-router')},function(a){a.exports=require('apollo-server-koa')},function(a,b,c){'use strict';var d=c(6),e=d.startApolloServer,f=d.typeDefs,g=d.resolvers,h=d.app;e(h,f,g)},function(a,b,c){'use strict';(function(b){function d(a){return a&&a.__esModule?a:{default:a}}var e=c(1),f=d(e),g=c(7),h=d(g),i=c(2),j=d(i),k=function(){var a=(0,j.default)(f.default.mark(function a(b,c,d){var e,g;return f.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=u.createServer(),g=new r({typeDefs:c,resolvers:d,plugins:[t({httpServer:e})]}),a.next=4,g.start();case 4:return g.applyMiddleware({app:b}),e.on('request',b.callback()),a.next=8,new h.default(function(a){return e.listen({url:'192.168.9.73',port:3e3},a)});case 8:return console.log('\uD83D\uDE80 Server ready at http://localhost:3000'+g.graphqlPath),console.log('\uD83D\uDE80 Server ready at http://192.168.2.110:3000'+g.graphqlPath),a.abrupt('return',{server:g,app:b});case 11:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}();c(8);var l=c(15),m=c(16),n=c(17),o=c(3),p=c(19),q=c(4),r=q.ApolloServer,s=c(20),t=s.ApolloServerPluginDrainHttpServer,u=c(21),v=c(22),w=v.typeDefs,x=v.resolvers;console.log('zhangle>>>>>');var y=new o;y.use(n.routes());var z=new l;z.use(m(b+'/static')),z.use(y.routes()).use(y.allowedMethods()),a.exports={startApolloServer:k,app:z,typeDefs:w,resolvers:x}}).call(b,'/')},function(a){a.exports=require('babel-runtime/core-js/promise')},function(a,b,c){'use strict';function d(a){return a&&a.__esModule?a:{default:a}}var e=c(1),f=d(e),g=c(2),h=d(g),i=function(){var a=(0,h.default)(f.default.mark(function a(){return f.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,j.connect('mongodb://localhost:27017/zldb');case 2:case'end':return a.stop();}},a,this)}));return function(){return a.apply(this,arguments)}}(),j=c(0);c(9),c(10),c(11),c(12),c(13),c(14),i().catch(function(a){return console.log('err+zhangle',a)})},function(a,b,c){'use strict';var d=c(0),e=d.Schema,f=new e({uname:String,pwd:String,utoken:String,class:String,classNo:String,nickName:String,realName:String,avatarUrl:String,openId:String,isWxUser:Boolean,userType:Number,gender:String,grade:String,phone:String,age:String,course:[Object],studyCourse:[Object],meta:{createdAt:{type:Date,default:Date.now()},updateAt:{type:Date,default:Date.now()}}});f.pre('save',function(a){this.isNew&&(this.course=[],this.userType=1,this.meta.createdAt=this.meta.updateAt=Date.now()),this.meta.updateAt=Date.now(),a()}),d.model('User',f)},function(a,b,c){'use strict';var d=c(0),e=d.Schema,f=new e({createrAvatarUrl:String,createrId:String,courseName:String,teacherName:String,invitationCode:String,students:[Object],studentsNumber:Number,meta:{createdAt:{type:Date,default:Date.now()},updateAt:{type:Date,default:Date.now()}}});f.pre('save',function(a){this.isNew&&(this.meta.createdAt=this.meta.updateAt=Date.now()),this.meta.updateAt=Date.now(),this.studentsNumber=this.students.length,a()}),d.model('Course',f)},function(a,b,c){'use strict';var d=c(0),e=d.Schema,f=new e({createrAvatarUrl:String,createrId:String,course_id:String,courseName:String,teacherName:String,invitationCode:String,exerciseName:String,exerciseList:[Object],doneStudent:[String],meta:{createdAt:{type:Date,default:Date.now()},updateAt:{type:Date,default:Date.now()}}});f.pre('save',function(a){this.isNew&&(this.meta.createdAt=this.meta.updateAt=Date.now()),this.meta.updateAt=Date.now(),a()}),d.model('Exercise',f)},function(a,b,c){'use strict';var d=c(0),e=d.Schema,f=new e({createrAvatarUrl:String,createrId:String,courseName:String,userId:String,course_id:String,exerciseId:String,exerciseName:String,exercisesScoreRecord:Number,exercisesCorrectRecord:[Boolean],userInputKeyList:[Object],meta:{createdAt:{type:Date,default:Date.now()},updateAt:{type:Date,default:Date.now()}}});f.pre('save',function(a){this.isNew&&(this.meta.createdAt=this.meta.updateAt=Date.now()),this.meta.updateAt=Date.now(),a()}),d.model('ExerciseRecord',f)},function(a,b,c){'use strict';var d=c(0),e=d.Schema,f=new e({createrAvatarUrl:String,createrId:String,course_id:String,courseName:String,teacherName:String,invitationCode:String,textArea:String,imgList:[String],readStudent:[String],meta:{createdAt:{type:Date,default:Date.now()},updateAt:{type:Date,default:Date.now()}}});f.pre('save',function(a){this.isNew&&(this.meta.createdAt=this.meta.updateAt=Date.now()),this.meta.updateAt=Date.now(),a()}),d.model('Notify',f)},function(a,b,c){'use strict';var d=c(0),e=d.Schema,f=new e({userId:String,calcCount:Number,score:Number,timer:Object,calcList:[Object],calcType:String,meta:{createdAt:{type:Date,default:Date.now()},updateAt:{type:Date,default:Date.now()}}});f.pre('save',function(a){this.isNew&&(this.meta.createdAt=this.meta.updateAt=Date.now()),this.meta.updateAt=Date.now(),a()}),d.model('Calc',f)},function(a){a.exports=require('koa')},function(a){a.exports=require('koa-static')},function(a,b,c){'use strict';var d=c(3)(),e=c(18),f=e.getInfo;d.get('/getInfo',f),a.exports=d},function(a,b,c){'use strict';function d(a){return a&&a.__esModule?a:{default:a}}var e=c(1),f=d(e),g=c(2),h=d(g),i=function(){var a=(0,h.default)(f.default.mark(function a(b){return f.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b.body={msg:'hellow ahut'};case 1:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}();a.exports={getInfo:i}},function(a){a.exports=require('koa-bodyparser')},function(a){a.exports=require('apollo-server-core')},function(a){a.exports=require('http')},function(a,b,c){'use strict';var d=c(23),e=c(25),f=c(0);a.exports={typeDefs:d,resolvers:e}},function(a,b,c){'use strict';var d=c(24),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=(0,e.default)(['\n\n  type UserCourse{\n    invitationCode:String\n  }\n  type meta {\n    createdAt:String,\n    updateAt:String\n  }\n  type User {\n    _id:String,\n    uname: String,\n    pwd: String,\n    utoken: String,\n    class: String,\n    classNo: String,\n    nickName:String,\n    avatarUrl: String,\n    realName:String,\n    openId: String,\n    userType:Int,\n    isWxUser:Boolean,\n    gender:String,\n    grade:String,\n    phone:String,\n    age:String,\n    course:[UserCourse]\n  }\n  type Key{\n    keyIndex:String\n    keyValue:String\n    trueKey:Boolean\n  }\n  type Exercises{\n    iscorrectExerciseType:Boolean,\n    textArea:String,\n    imgList:[String],\n    keyList:[Key],\n    exercisesType:Int,\n    exercisesIndex:String\n  }\n  type CreateExercisesListOrNotify{\n    _id:String,\n    exerciseName:String,\n    exerciseCount:Int,\n    NotifyCount:Int,\n    createrAvatarUrl: String,\n    createrId: String,\n    course_id:String,\n    courseName: String,\n    teacherName: String,\n    invitationCode: String,\n    imgList:String,  \n    readStudent:[String], \n    userInputKeyList:String,\n    textArea:String,\n    exerciseList:[Exercises]\n    exercisesCorrectRecord:[Boolean]\n    meta:meta\n  }\n  type ExerciseOrNotifyRecord{\n    _id:String,\n    exerciseName:String,\n    userId: String,\n    createrId:String\n    createrAvatarUrl:String\n    courseName:String\n    exerciseId:String\n    exercisesCorrectRecord:[Boolean]\n    exercisesScoreRecord:Int\n    meta:meta\n  }\n  type Calc{\n    _id:String,\n    calcList:String,\n    score:Int,\n    calcCount:Int,\n    timer:String,\n    userId:String,\n    calcType:String\n  }\n  type Course{\n    _id:String,\n    createrAvatarUrl: String,\n    createrId: String,\n    courseName: String,\n    teacherName:String,\n    invitationCode:String,\n    students:[User],\n    studentsNumber:Int,\n  }\n\n  type QueryResult{\n    acknowledged: Int,\n    modifiedCount: Int,\n    upsertedId: String,\n    upsertedCount: Int,\n    matchedCount: Int\n  }\n  type TabTotal{\n    exerciseCount:Int,\n    notifyCount:Int,\n    calcCount:Int\n  }\n  type Query {\n    users:[User]\n    examIndex(invitationCodeList:[String]!,userId:String!,from:String):[CreateExercisesListOrNotify]\n    loginuser(uname:String!,pwd:String!):User\n    checkuser(uname:String!,openId:String!):User\n    queryCourse(createrId:String!):[Course]\n    queryStudentCourse(_id:String!):[Course]\n    getExam(id:String!,from:String):CreateExercisesListOrNotify\n    addCourse(invitationCode:String!,_id:String!):Course\n    deleteCourse(userId:String!,userType:Int!,courseId:String!,invitationCode:String!):QueryResult\n    updateUserInfomation(_id:String!, avatarUrl:String!,realName:String!,nickName:String!,age:String! ,grade:String!,gender:String!,phone:String!,userType:Int!):User\n    createExercise(createrAvatarUrl: String!,createrId: String!,course_id:String,courseName: String!,teacherName: String!,invitationCode: String!,exerciseList:String!,exerciseName:String):CreateExercisesListOrNotify\n    submitExercise(exerciseId:String!,courseName:String!,createrId:String!,createrAvatarUrl:String!,userId:String!,course_id:String!,exercisesScoreRecord:Int!,exercisesCorrectRecord:String!,userInputKeyList:String,exerciseName:String):CreateExercisesListOrNotify\n    createNotify(createrAvatarUrl: String!,createrId: String!,course_id:String!,courseName: String!,teacherName: String!,invitationCode: String!,textArea:String!,imgList:String!):CreateExercisesListOrNotify\n    getNotify(invitationCodeList:[String]!,userId:String!,from:String,skip:Int,userType:Int):[CreateExercisesListOrNotify]\n    readNotify(userId:String!,notifyId:String!):CreateExercisesListOrNotify\n    submitCalc(calcList:String!,score:Int!,calcCount:Int!,timer:String!,userId:String!,calcType:String!):Calc\n    getTabTotal(userId:String!,userType:Int):TabTotal\n    getExerciseRecord(userId:String!,skip:Int,userType:Int):[ExerciseOrNotifyRecord]\n    getCalcRecord(userId:String!,skip:Int):[Calc]\n    deleteCalcRecord(calcId:String!):Calc\n  }\n\n  type Mutation{\n    setUser(post: UserInput): User\n    updateUserInfo(post: UpdateUserInfoInput):User\n    createCourse(post: CourseInput):Course\n  }\n\n  input UserInput {\n    uname: String,\n    pwd: String,\n    classNo: String,\n    nickName:String,\n    avatarUrl: String,\n    openId: String,\n    isWxUser:Boolean,\n    realName:String,\n    age:String,\n    grade:String,\n    gender:String,\n    phone:String\n  }\n\n  input UpdateUserInfoInput{\n    _id: String!\n    avatarUrl:String\n  }\n  \n  input CourseInput {\n    createrAvatarUrl: String,\n    createrId: String,\n    courseName: String,\n    teacherName:String,\n    invitationCode:String,\n  }\n  input KeyInput{\n    keyIndex:String\n    keyValue:String\n    trueKey:Boolean\n  }\n  input ExercisesInput {\n    iscorrectExerciseType:Boolean,\n    textArea:String,\n    imgList:[String],\n    keyList:[KeyInput],\n    exercisesType:Int,\n    exercisesIndex:String\n  }\n'],['\n\n  type UserCourse{\n    invitationCode:String\n  }\n  type meta {\n    createdAt:String,\n    updateAt:String\n  }\n  type User {\n    _id:String,\n    uname: String,\n    pwd: String,\n    utoken: String,\n    class: String,\n    classNo: String,\n    nickName:String,\n    avatarUrl: String,\n    realName:String,\n    openId: String,\n    userType:Int,\n    isWxUser:Boolean,\n    gender:String,\n    grade:String,\n    phone:String,\n    age:String,\n    course:[UserCourse]\n  }\n  type Key{\n    keyIndex:String\n    keyValue:String\n    trueKey:Boolean\n  }\n  type Exercises{\n    iscorrectExerciseType:Boolean,\n    textArea:String,\n    imgList:[String],\n    keyList:[Key],\n    exercisesType:Int,\n    exercisesIndex:String\n  }\n  type CreateExercisesListOrNotify{\n    _id:String,\n    exerciseName:String,\n    exerciseCount:Int,\n    NotifyCount:Int,\n    createrAvatarUrl: String,\n    createrId: String,\n    course_id:String,\n    courseName: String,\n    teacherName: String,\n    invitationCode: String,\n    imgList:String,  \n    readStudent:[String], \n    userInputKeyList:String,\n    textArea:String,\n    exerciseList:[Exercises]\n    exercisesCorrectRecord:[Boolean]\n    meta:meta\n  }\n  type ExerciseOrNotifyRecord{\n    _id:String,\n    exerciseName:String,\n    userId: String,\n    createrId:String\n    createrAvatarUrl:String\n    courseName:String\n    exerciseId:String\n    exercisesCorrectRecord:[Boolean]\n    exercisesScoreRecord:Int\n    meta:meta\n  }\n  type Calc{\n    _id:String,\n    calcList:String,\n    score:Int,\n    calcCount:Int,\n    timer:String,\n    userId:String,\n    calcType:String\n  }\n  type Course{\n    _id:String,\n    createrAvatarUrl: String,\n    createrId: String,\n    courseName: String,\n    teacherName:String,\n    invitationCode:String,\n    students:[User],\n    studentsNumber:Int,\n  }\n\n  type QueryResult{\n    acknowledged: Int,\n    modifiedCount: Int,\n    upsertedId: String,\n    upsertedCount: Int,\n    matchedCount: Int\n  }\n  type TabTotal{\n    exerciseCount:Int,\n    notifyCount:Int,\n    calcCount:Int\n  }\n  type Query {\n    users:[User]\n    examIndex(invitationCodeList:[String]!,userId:String!,from:String):[CreateExercisesListOrNotify]\n    loginuser(uname:String!,pwd:String!):User\n    checkuser(uname:String!,openId:String!):User\n    queryCourse(createrId:String!):[Course]\n    queryStudentCourse(_id:String!):[Course]\n    getExam(id:String!,from:String):CreateExercisesListOrNotify\n    addCourse(invitationCode:String!,_id:String!):Course\n    deleteCourse(userId:String!,userType:Int!,courseId:String!,invitationCode:String!):QueryResult\n    updateUserInfomation(_id:String!, avatarUrl:String!,realName:String!,nickName:String!,age:String! ,grade:String!,gender:String!,phone:String!,userType:Int!):User\n    createExercise(createrAvatarUrl: String!,createrId: String!,course_id:String,courseName: String!,teacherName: String!,invitationCode: String!,exerciseList:String!,exerciseName:String):CreateExercisesListOrNotify\n    submitExercise(exerciseId:String!,courseName:String!,createrId:String!,createrAvatarUrl:String!,userId:String!,course_id:String!,exercisesScoreRecord:Int!,exercisesCorrectRecord:String!,userInputKeyList:String,exerciseName:String):CreateExercisesListOrNotify\n    createNotify(createrAvatarUrl: String!,createrId: String!,course_id:String!,courseName: String!,teacherName: String!,invitationCode: String!,textArea:String!,imgList:String!):CreateExercisesListOrNotify\n    getNotify(invitationCodeList:[String]!,userId:String!,from:String,skip:Int,userType:Int):[CreateExercisesListOrNotify]\n    readNotify(userId:String!,notifyId:String!):CreateExercisesListOrNotify\n    submitCalc(calcList:String!,score:Int!,calcCount:Int!,timer:String!,userId:String!,calcType:String!):Calc\n    getTabTotal(userId:String!,userType:Int):TabTotal\n    getExerciseRecord(userId:String!,skip:Int,userType:Int):[ExerciseOrNotifyRecord]\n    getCalcRecord(userId:String!,skip:Int):[Calc]\n    deleteCalcRecord(calcId:String!):Calc\n  }\n\n  type Mutation{\n    setUser(post: UserInput): User\n    updateUserInfo(post: UpdateUserInfoInput):User\n    createCourse(post: CourseInput):Course\n  }\n\n  input UserInput {\n    uname: String,\n    pwd: String,\n    classNo: String,\n    nickName:String,\n    avatarUrl: String,\n    openId: String,\n    isWxUser:Boolean,\n    realName:String,\n    age:String,\n    grade:String,\n    gender:String,\n    phone:String\n  }\n\n  input UpdateUserInfoInput{\n    _id: String!\n    avatarUrl:String\n  }\n  \n  input CourseInput {\n    createrAvatarUrl: String,\n    createrId: String,\n    courseName: String,\n    teacherName:String,\n    invitationCode:String,\n  }\n  input KeyInput{\n    keyIndex:String\n    keyValue:String\n    trueKey:Boolean\n  }\n  input ExercisesInput {\n    iscorrectExerciseType:Boolean,\n    textArea:String,\n    imgList:[String],\n    keyList:[KeyInput],\n    exercisesType:Int,\n    exercisesIndex:String\n  }\n']),g=c(4),h=g.gql,i=h(f);a.exports=i},function(a){a.exports=require('babel-runtime/helpers/taggedTemplateLiteral')},function(a,b,c){'use strict';function d(a){return a&&a.__esModule?a:{default:a}}var e=c(26),f=d(e),g=c(1),h=d(g),i=c(2),j=d(i),k=c(27),l=k.zlDecodeList,m=k.zlEncodeList,n=c(0),o=n.model('User'),p=n.model('Course'),q=n.model('Exercise'),r=n.model('ExerciseRecord'),s=n.model('Notify'),t=n.model('Calc'),u=n.Types.ObjectId,v={Query:{users:function(){var a=(0,j.default)(h.default.mark(function a(){var b;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.find({});case 2:return b=a.sent,a.abrupt('return',b);case 4:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),loginuser:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.findOne(c);case 2:return d=a.sent,a.abrupt('return',d);case 4:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),checkuser:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=void 0,d=c.uname?(0,f.default)({},c):{openId:c.openId},a.next=4,o.findOne(d);case 4:return e=a.sent,a.abrupt('return',e);case 6:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),queryCourse:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.find((0,f.default)({},c));case 2:return d=a.sent,a.abrupt('return',d);case 4:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),queryStudentCourse:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.find({students:{$elemMatch:{_id:u(c._id)}}});case 2:return d=a.sent,a.abrupt('return',d);case 4:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),addCourse:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e,f,g,i,j,k,l,m;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.findOne({_id:c._id});case 2:return d=a.sent,e=d._id,f=d.uname,g=d.avatarUrl,i=d.nickName,j=d.realname,k=void 0===j?'':j,a.next=11,p.findOne({invitationCode:c.invitationCode});case 11:if(l=a.sent,!l){a.next=15;break}return a.next=15,o.updateOne({_id:e},{$push:{course:{invitationCode:c.invitationCode}}});case 15:return m=l.studentsNumber,p.updateOne({invitationCode:c.invitationCode},{$push:{students:{_id:e,uname:f,avatarUrl:g,nickName:i,realname:k}},studentsNumber:m+1},function(){}),a.abrupt('return',l);case 18:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),deleteCourse:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e,f,g,i,j;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=c.userId,e=c.userType,f=c.courseId,g=c.invitationCode,i=void 0,j=void 0,!e){a.next=12;break}return a.next=6,p.updateOne({_id:u(f)},{$pull:{students:{_id:u(d)}},$inc:{studentsNumber:-1}});case 6:return i=a.sent,a.next=9,o.updateOne({_id:u(d)},{$pull:{course:{invitationCode:g}}});case 9:j=a.sent,a.next=18;break;case 12:return a.next=14,p.remove({_id:u(f)});case 14:return i=a.sent,a.next=17,o.update({course:{invitationCode:g}},{$pull:{course:{invitationCode:g}}});case 17:j=a.sent;case 18:return a.abrupt('return',{});case 19:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),updateUserInfomation:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e,f,g,i,j,k,l,m,n;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=c._id,e=c.avatarUrl,f=c.realName,g=c.nickName,i=c.age,j=c.grade,k=c.gender,l=c.phone,m=c.userType,a.next=3,o.updateOne({_id:d},{$set:{avatarUrl:e,realName:f,nickName:g,age:i,grade:j,gender:k,phone:l,userType:m}},{upsert:!0});case 3:return n=a.sent,a.abrupt('return',o.findOne({_id:d}));case 5:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),createExercise:function(a,b){var c=b.createrAvatarUrl,d=b.createrId,e=b.course_id,f=b.courseName,g=b.teacherName,h=b.exerciseName,i=b.invitationCode,j=l(b.exerciseList);return q.create({createrAvatarUrl:c,createrId:d,course_id:e,courseName:f,teacherName:g,exerciseName:h,invitationCode:i,exerciseList:j})},examIndex:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=c.invitationCodeList.map(function(a){return{invitationCode:a}}),a.next=3,q.find({$or:d,doneStudent:{$nin:[c.userId]}});case 3:if(e=a.sent,'index'!==c.from){a.next=6;break}return a.abrupt('return',[{exerciseCount:e.length}]);case 6:return a.abrupt('return',e);case 7:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),getExam:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e,g,i,j;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=c.id,e=c.from,console.log('args: ',c),g=void 0,'record'!==e){a.next=14;break}return a.next=6,q.findOne({_id:u(d)});case 6:return i=a.sent,a.next=9,r.findOne({exerciseId:d});case 9:j=a.sent,j.userInputKeyList,g=(0,f.default)({exerciseList:i.exerciseList},j._doc,{userInputKeyList:m(j._doc.userInputKeyList)}),a.next=17;break;case 14:return a.next=16,q.findOne({_id:u(d)});case 16:g=a.sent;case 17:return console.log('res: ',g),a.abrupt('return',g);case 19:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),submitExercise:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e,f,g,i,j,k,m,n,o,p;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=c.courseName,e=c.course_id,f=c.createrAvatarUrl,g=c.createrId,i=c.exerciseName,j=c.exerciseId,k=c.exercisesCorrectRecord,m=c.exercisesScoreRecord,n=c.userInputKeyList,o=c.userId,p=void 0,q.updateOne({_id:j},{$push:{doneStudent:c.userId}}).then(function(a){console.log(a)}),r.create({courseName:d,course_id:e,createrAvatarUrl:f,createrId:g,exerciseId:j,exerciseName:i,exercisesCorrectRecord:l(k),exercisesScoreRecord:m,userInputKeyList:l(n),userId:o}).then(function(a){p=a}).catch(function(a){console.log(':eeee',a)}),a.abrupt('return',p);case 5:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),createNotify:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e,f,g,i,j,k,m;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=c.createrAvatarUrl,e=c.createrId,f=c.course_id,g=c.courseName,i=c.teacherName,j=c.invitationCode,k=c.textArea,m=l(c.imgList),a.abrupt('return',s.create({createrAvatarUrl:d,createrId:e,course_id:f,courseName:g,teacherName:i,invitationCode:j,textArea:k,imgList:m}));case 3:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),getNotify:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e,g;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=c.invitationCodeList.map(function(a){return{invitationCode:a}}),e=void 0,'record'!==c.from){a.next=14;break}if(!c.userType){a.next=9;break}return a.next=6,s.find({$or:d,readStudent:{$in:[c.userId]}}).sort([['_id',-1]]).skip(c.skip).limit(6);case 6:e=a.sent,a.next=12;break;case 9:return a.next=11,s.find({createrId:c.userId}).sort([['_id',-1]]).skip(c.skip).limit(6);case 11:e=a.sent;case 12:a.next=17;break;case 14:return a.next=16,s.find({$or:d,readStudent:{$nin:[c.userId]}}).sort([['_id',-1]]);case 16:e=a.sent;case 17:if('index'!==c.from){a.next=19;break}return a.abrupt('return',[{NotifyCount:e.length}]);case 19:return g=e.map(function(a){return(0,f.default)({},a._doc,{imgList:m(a.imgList)})}),a.abrupt('return',g);case 21:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),readNotify:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=c.notifyId,e=c.userId,s.updateOne({_id:d},{$push:{readStudent:e}}).then(function(a){console.log(a)}),a.abrupt('return',{_id:d});case 3:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),submitCalc:function(a,b){var c=b.calcList,d=b.score,e=b.calcCount,f=b.timer,g=b.userId,h=b.calcType,i=l(c),j=l(f);return t.create({calcList:i,timer:j,score:d,calcType:h,calcCount:e,userId:g}),{userId:g}},getTabTotal:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e,f,g,i;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=c.userId,e=c.userType,f=void 0,g=void 0,!e){a.next=12;break}return a.next=6,r.find({userId:d}).count(!0);case 6:return f=a.sent,a.next=9,s.find({readStudent:{$in:[c.userId]}}).count();case 9:g=a.sent,a.next=18;break;case 12:return a.next=14,q.find({createrId:d}).count(!0);case 14:return f=a.sent,a.next=17,s.find({createrId:d}).count();case 17:g=a.sent;case 18:return a.next=20,t.find({userId:d}).count();case 20:return i=a.sent,a.abrupt('return',{exerciseCount:f,notifyCount:g,calcCount:i});case 22:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),getExerciseRecord:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e,f,g;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d=c.userId,e=c.skip,f=c.userType,g=void 0,!f){a.next=8;break}return a.next=5,r.find({userId:d}).sort([['_id',-1]]).skip(e).limit(6);case 5:g=a.sent,a.next=11;break;case 8:return a.next=10,q.find({createrId:d}).sort([['_id',-1]]).skip(e).limit(6);case 10:g=a.sent;case 11:return a.abrupt('return',g);case 12:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),getCalcRecord:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e,g,i;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=c.userId,e=c.skip,a.next=3,t.find({userId:d}).sort([['_id',-1]]).skip(e).limit(6);case 3:return g=a.sent,i=g.map(function(a){return(0,f.default)({},a._doc,{calcList:m(a.calcList),timer:m(a.timer)})}),a.abrupt('return',i);case 6:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),deleteCalcRecord:function(){var a=(0,j.default)(h.default.mark(function a(b,c){return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.deleteOne({_id:c.calcId});case 2:return a.abrupt('return',{_id:c.calcId});case 3:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}()},Mutation:{setUser:function(a,b){var c=b.post,d=c.uname,e=c.pwd,f=c.classNo,g=c.openId,h=c.avatarUrl,i=c.isWxUser,j=c.nickName,k=c.realName,l=c.age,m=c.grade,n=c.gender,p=c.phone;return i?o.create({uname:j,pwd:e,classNo:f,openId:g,avatarUrl:h,isWxUser:i,nickName:j,realName:k,age:l,grade:m,gender:n,phone:p}):o.create({uname:d,pwd:e,classNo:f,openId:g,avatarUrl:h,isWxUser:i,nickName:j,realName:k,age:l,grade:m,gender:n,phone:p})},updateUserInfo:function(){var a=(0,j.default)(h.default.mark(function a(b,c){var d,e,f;return h.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=c.post,e=d.avatarUrl,f=d._id,a.next=3,o.updateOne({_id:f},{avatarUrl:e});case 3:return a.abrupt('return',a.sent);case 4:case'end':return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}(),createCourse:function(a,b){var c=b.post,d=c.createrAvatarUrl,e=c.createrId,f=c.courseName,g=c.teacherName,h=c.invitationCode;return p.create({createrAvatarUrl:d,createrId:e,courseName:f,teacherName:g,invitationCode:h})}}};a.exports=v},function(a){a.exports=require('babel-runtime/helpers/extends')},function(a,b,c){'use strict';var d=c(28),e=function(a){return a&&a.__esModule?a:{default:a}}(d);a.exports={zlDecodeList:function(a){return JSON.parse(a.replace(/\+z\&l\+/g,'"'))},zlEncodeList:function(a){return(0,e.default)(a).replace(/\"/g,'+z&l+')}}},function(a){a.exports=require('babel-runtime/core-js/json/stringify')}]);